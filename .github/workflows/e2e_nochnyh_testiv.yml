name: E2E –Ω—ñ—á–Ω—ñ —Ç–µ—Å—Ç–∏

on:
  schedule:
    # */144 = –∫–æ–∂–Ω—ñ 10 —Ö–≤–∏–ª–∏–Ω ‚áí 144 –∑–∞–ø—É—Å–∫—ñ–≤/–¥–æ–±–∞.
    # –í—ñ–∑—å–º–µ–º–æ –∫–æ–∂–Ω—ñ 144 —Ö–≤–∏–ª–∏–Ω–∏ (10 —Ä–∞–∑—ñ–≤/–¥–æ–±–∞).
    - cron: '0 */2 * * *'
  workflow_dispatch:

jobs:
  e2e:
    runs-on: ubuntu-latest
    steps:
      - name: üõéÔ∏è –ö–ª–æ–Ω—É—é –∫–æ–¥
        uses: actions/checkout@v4

      - name: üê≥ –°—Ç–∞—Ä—Ç—É—é docker-–∫–æ–º–ø–æ–∑–∏—Ü—ñ—é
        run: docker compose up -d

      - name: üß™ –ó–∞–ø—É—Å–∫–∞—é Playwright-—Ç–µ—Å—Ç–∏
        uses: microsoft/playwright-github-action@v1
        with:
          args: install --with-deps
      - run: |
          npm ci
          npx playwright test

      - name: üì¶ –ó–±–∏—Ä–∞—é –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∏ (—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏)
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: playwright-report
          path: playwright-report
